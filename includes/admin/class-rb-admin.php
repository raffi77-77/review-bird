<?php

namespace Review_Bird\Includes\Admin;

use Review_Bird\Includes\Admin\Pages\Review;
use Review_Bird\Includes\Admin\Pages\Setting;
use Review_Bird\Includes\Admin\Pages\Skin;
use Review_Bird\Includes\Admin\Pages\Feedback;
use Review_Bird\Includes\Services\Freemius;
use Review_Bird\Includes\Traits\SingletonTrait;

class Admin {

	use SingletonTrait;

	public $fs;
	protected Setting\Page $setting_page;
	protected Review\Page $review_page;
	protected Skin\Page $skin_page;
	protected Feedback\Page $feedback_page;

	public function __construct() {
		$this->setting_page  = new Setting\Page();
		$this->review_page   = new Review\Page();
		$this->skin_page     = new Skin\Page();
		$this->feedback_page = new Feedback\Page();
	}

	public function boot() {
		$this->fs = Freemius::instance()->fs;
		add_action( 'admin_menu', array( $this, 'add_options_page' ) );
		add_action( 'admin_init', array( Asset::instance(), 'admin_init' ) );
	}

	public function add_options_page(): void {
		$icon_base64 = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDIwMDEwOTA0Ly9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4wIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiB3aWR0aD0iMTUwLjAwMDAwMHB0IiBoZWlnaHQ9IjE1MC4wMDAwMDBwdCIgdmlld0JveD0iMCAwIDE1MC4wMDAwMDAgMTUwLjAwMDAwMCIKIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIG1lZXQiPgoKPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsMTUwLjAwMDAwMCkgc2NhbGUoMC4xMDAwMDAsLTAuMTAwMDAwKSIKZmlsbD0iIzAwMDAwMCIgc3Ryb2tlPSJub25lIj4KPHBhdGggZD0iTTQ1MCAxMTc3IGMtNTIgLTE2IC0xMjMgLTkzIC0xMzggLTE0NyAtOCAtMjkgLTEyIC05NiAtMTAgLTE4OCBsMwotMTQzIDQzIDM2IDQyIDM3IDAgMTE3IGMwIDEwNiAyIDEyMSAyMyAxNTIgMzYgNTUgNzYgNjkgMTk3IDY5IDgxIDAgMTE3IDUKMTU4IDIwIDI5IDExIDcwIDIwIDkyIDIwIDIyIDAgNjMgLTkgOTIgLTIwIDMzIC0xMiA3NyAtMjAgMTE2IC0yMCA3NiAwIDExOQotMTcgMTU1IC01OSBsMjcgLTMzIDAgLTMxMCBjMCAtNDQwIDM0IC00MDggLTQzMCAtNDA4IC0zNDMgMCAtMzUwIDEgLTM5NiA1MgotMTIgMTIgLTI1IDM0IC0yOSA0NyBsLTcgMjMgLTM0IC0zMyBjLTE5IC0xOCAtMzQgLTM3IC0zNCAtNDEgMCAtMTggNzggLTkyCjExNSAtMTA5IDM2IC0xNyA3MyAtMTkgMzg2IC0xOSBsMzQ3IDAgNTMgMjggYzM5IDIwIDYyIDQxIDg0IDc3IGwzMCA0OCAzIDMwOApjMiAyMDUgLTEgMzIyIC04IDM0OSAtMTUgNTcgLTgwIDEyNSAtMTM3IDE0NCAtMzkgMTMgLTEwMSAxNiAtMzc3IDE1IC0yMTIgLTEKLTM0NCAtNSAtMzY2IC0xMnoiIGZpbGw9IiM3ODA1REUiLz4KPHBhdGggZD0iTTgxMCAxMDgxIGMtNzEgLTIyIC0xMTkgLTYzIC0xNDQgLTEyMiAtMTcgLTQxIC0xMyAtNDkgMjIgLTQ5IDEzIDAKNDIgLTEwIDY0IC0yMiAxMzUgLTc2IDk4IC0yNjcgLTY5IC0zNTIgLTQ0IC0yMiAtNjYgLTI5IC0xNTggLTUxIGwtMzAgLTggMzAKLTEzIGMxNyAtNyA0NSAtMTMgNjMgLTE0IDI4IDAgMzUgLTUgNDggLTM2IDE3IC00MSAxOSAtMzggLTIxIC01MSAtMTYgLTUgLTMxCi0xNyAtMzMgLTI3IC0zIC0xNSA3IC0xNiA5NSAtMTQgODQgMyA5OCA1IDEwMSAyMSAyIDEyIC0zIDE3IC0xOCAxNyAtMzcgMAotNjAgMTkgLTYwIDQ5IDAgMjMgNiAzMSAyOSAzOSAyOCAxMCAzMSA4IDU2IC0zMCAyMiAtMzMgMjQgLTQyIDEzIC01NSAtMjEKLTI2IDE3IC00NCA4NyAtNDEgNTIgMyA2MCA2IDYwIDIzIDAgMTUgLTggMjEgLTM1IDI1IC0yNyA0IC0zOSAxMyAtNTcgNDUgLTEyCjIyIC0yMyA0NyAtMjMgNTYgMCA4IDIwIDI5IDQ1IDQ3IDUwIDM1IDEwMyAxMDQgMTIzIDE2MCA3IDIwIDE2IDcyIDE5IDExNCBsNgo3NyA2NCAzMSBjODIgNDEgNzkgNTMgLTIwIDc0IC0xNSA0IC00OCAyNiAtNzIgNTEgLTU4IDU3IC0xMjAgNzYgLTE4NSA1NnoKbTEwNCAtOTcgYzE5IC0xOCAyMCAtMjggNiAtNTUgLTEyIC0yMiAtNTkgLTI2IC03OCAtNyAtMjYgMjYgLTEgNzggMzggNzggMTAKMCAyNiAtNyAzNCAtMTZ6Ii8+CjxwYXRoIGQ9Ik01NzAgODMxIGMtMzUgLTE5IC0yMzUgLTE4NyAtMjc4IC0yMzQgbC0yNCAtMjUgMjYgLTE4IGMzOCAtMjQgMjI4Ci0xNSAzMDUgMTQgMTM2IDUzIDE5OCAxNDEgMTU5IDIyNyAtMjUgNTQgLTExOSA3MiAtMTg4IDM2eiIgZmlsbD0iIzc4MDVERSIvPgo8cGF0aCBkPSJNMTcwIDUzMCBjLTE5IC0xMCAtNDggLTMyIC02NSAtNDkgLTI0IC0yNiAtMjcgLTM1IC0xOSAtNDkgNiAtOSAyMgotMTggMzYgLTIwIDE2IC0yIDMwIC0xMyAzNyAtMjkgMTAgLTIxIDE2IC0yNCAzOSAtMTggMTUgMyA0MSAxNiA1OCAyOCAzMyAyMwoxMDQgODQgMTA0IDg5IDAgMiAtMjIgNCAtNDkgNSAtNTYgMiAtODkgMTYgLTk5IDQzIC03IDE4IC04IDE4IC00MiAweiIvPgo8L2c+Cjwvc3ZnPgo=';
		add_menu_page( __( 'Review Bird', 'review-bird' ), __( 'Review Bird', 'review-bird' ), 'manage_options', 'review-bird', null, $icon_base64, 13 );
		$this->setting_page->add_submenu_page();
		$this->review_page->add_submenu_page();
		$this->skin_page->add_submenu_page();
		$this->feedback_page->add_submenu_page();
	}
}